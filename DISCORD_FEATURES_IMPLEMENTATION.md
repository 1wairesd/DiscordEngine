# Discord Engine - –ü–æ–ª–Ω–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

## –ß—Ç–æ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π DiscordCommandContext
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Discord API:
- `replyEphemeral()` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `replyEmbed()` - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `deferReply()` - –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- `getUser()`, `getMember()`, `getGuild()`, `getChannel()` - –¥–æ—Å—Ç—É–ø –∫ —Å—É—â–Ω–æ—Å—Ç—è–º
- `getOptionAs*()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–∞–Ω–¥
- `addReaction()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–∫—Ü–∏–π
- `sendPrivateMessage()` - –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- `hasPermission()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –°–æ–æ–±—â–µ–Ω–∏–π
1. **DiscordSendMessageAction** - –æ–±—ã—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **DiscordEphemeralMessageAction** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
3. **DiscordPrivateMessageAction** - –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
4. **DiscordEmbedAction** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø–æ–ª–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
5. **DiscordReactionAction** - —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
6. **DiscordPinMessageAction** - –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
7. **DiscordDeleteMessagesAction** - –º–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –†–æ–ª–µ–π
1. **DiscordAddRoleAction** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
2. **DiscordRemoveRoleAction** - —É–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π
3. **DiscordCreateRoleAction** - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ä–æ–ª–µ–π

### ‚úÖ –ú–æ–¥–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –î–µ–π—Å—Ç–≤–∏—è
1. **DiscordKickAction** - –∫–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **DiscordBanAction** - –±–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **DiscordTimeoutAction** - —Ç–∞–π–º–∞—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ö–∞–Ω–∞–ª–æ–≤
1. **DiscordChannelMessageAction** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª
2. **DiscordCreateChannelAction** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ (—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö/–≥–æ–ª–æ—Å–æ–≤—ã—Ö)
3. **DiscordLockChannelAction** - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞–Ω–∞–ª–æ–≤
4. **DiscordSlowmodeAction** - —Ä–µ–∂–∏–º –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ —á–∞—Ç–∞
5. **DiscordThreadAction** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–µ–¥–æ–≤

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ì–æ–ª–æ—Å–æ–≤—ã—Ö –ö–∞–Ω–∞–ª–æ–≤
1. **DiscordMoveToVoiceAction** - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –≥–æ–ª–æ—Å–æ–≤–æ–π –∫–∞–Ω–∞–ª
2. **DiscordMuteAction** - –º—É—Ç/—Ä–∞–∑–º—É—Ç –≤ –≥–æ–ª–æ—Å–µ
3. **DiscordDeafenAction** - –æ–≥–ª—É—à–µ–Ω–∏–µ/—Ä–∞–∑–æ–≥–ª—É—à–µ–Ω–∏–µ

### ‚úÖ –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. **DiscordNicknameAction** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∏–∫–Ω–µ–π–º–æ–≤

### ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. **DiscordButtonAction** - –∫–Ω–æ–ø–∫–∏ (4 —Å—Ç–∏–ª—è + —Å—Å—ã–ª–∫–∏)
2. **DiscordSelectMenuAction** - –≤—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é
3. **DiscordModalAction** - –º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã

### ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π CommandLoader
–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π –∏–∑ YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
- –ë–∞–∑–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- Embeds —Å –ø–æ–ª—è–º–∏
- –†–æ–ª–∏ –∏ –º–æ–¥–µ—Ä–∞—Ü–∏—è
- –ö–∞–Ω–∞–ª—ã –∏ –≥–æ–ª–æ—Å
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
1. **example-commands.yml** - –ø—Ä–∏–º–µ—Ä—ã –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–º–∞–Ω–¥
2. **ACTIONS_REFERENCE.md** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º
3. **ActionHelper** - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### API Layer (–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π)
```
api/
‚îú‚îÄ‚îÄ DiscordCommandContext (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Object —Ç–∏–ø–∞–º–∏)
‚îú‚îÄ‚îÄ DiscordBotService (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å Object —Ç–∏–ø–∞–º–∏)
‚îî‚îÄ‚îÄ DiscordAction (–±–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
```

### Common Layer (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è)
```
common/
‚îú‚îÄ‚îÄ DiscordCommandContextImpl (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å JDA —Ç–∏–ø–∞–º–∏)
‚îú‚îÄ‚îÄ ActionHelper (—Ö–µ–ª–ø–µ—Ä –¥–ª—è —Ç–∏–ø–∏–∑–∞—Ü–∏–∏)
‚îî‚îÄ‚îÄ actions/
    ‚îú‚îÄ‚îÄ DiscordSendMessageAction
    ‚îú‚îÄ‚îÄ DiscordEmbedAction
    ‚îú‚îÄ‚îÄ DiscordAddRoleAction
    ‚îú‚îÄ‚îÄ DiscordKickAction
    ‚îú‚îÄ‚îÄ DiscordButtonAction
    ‚îî‚îÄ‚îÄ ... (–≤—Å–µ–≥–æ 20+ –¥–µ–π—Å—Ç–≤–∏–π)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```yaml
commands:
  welcome:
    description: "Welcome new members"
    trigger: "welcome"
    actions:
      - embed:
          title: "Welcome!"
          description: "Glad to have you!"
          color: "#00FF00"
      - add_role:
          role_id: "123456789"
      - reaction:
          emoji: "üëã"
      - buttons:
          message: "Choose your role:"
          buttons:
            - label: "Member"
              id: "role_member"
              style: "PRIMARY"
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```java
// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
DiscordCommand command = new DiscordCommandImpl(
    "test",
    "test",
    "Test command",
    List.of(
        new DiscordEmbedAction(...),
        new DiscordButtonAction(...)
    )
);

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
api.getDiscordCommandManager().registerCommand(command);
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Discord API

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- Slash Commands
- Embeds (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- Buttons (–∫–Ω–æ–ø–∫–∏)
- Select Menus (–≤—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é)
- Modals (–º–æ–¥–∞–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—ã)
- Reactions (—Ä–µ–∞–∫—Ü–∏–∏)
- Permissions (—Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è)
- Roles (—Ä–æ–ª–∏)
- Channels (–∫–∞–Ω–∞–ª—ã)
- Voice (–≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–∞–Ω–∞–ª—ã)
- Moderation (–º–æ–¥–µ—Ä–∞—Ü–∏—è)
- Threads (—Ç—Ä–µ–¥—ã)
- Ephemeral Messages (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)
- Private Messages (–ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è)

### üîÑ –ú–æ–∂–Ω–æ –î–æ–±–∞–≤–∏—Ç—å
- Context Menus (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –º–µ–Ω—é)
- Autocomplete (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
- Webhooks (–≤–µ–±—Ö—É–∫–∏)
- Scheduled Events (–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)
- Forum Channels (—Ñ–æ—Ä—É–º—ã)
- Stage Channels (—Å—Ü–µ–Ω—ã)
- Stickers (—Å—Ç–∏–∫–µ—Ä—ã)
- Voice States (–≥–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è)
- Audit Logs (–ª–æ–≥–∏ –∞—É–¥–∏—Ç–∞)
- Invites (–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è)
- Bans Management (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∞–º–∏)
- Emojis Management (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏)

## –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –û—Å—Ç–∞–ª—å–Ω—ã—Ö Actions
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –µ—â–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ –±–µ–∑ ActionHelper:
- DiscordChannelMessageAction
- DiscordCreateChannelAction
- DiscordCreateRoleAction
- DiscordMoveToVoiceAction
- DiscordMuteAction
- DiscordDeafenAction
- DiscordNicknameAction
- DiscordDeleteMessagesAction
- DiscordSlowmodeAction
- DiscordLockChannelAction

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Event Listeners
–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å –∫–Ω–æ–ø–∫–∞–º–∏, –º–µ–Ω—é –∏ –º–æ–¥–∞–ª—è–º–∏:
```java
public class ButtonInteractionListener extends ListenerAdapter {
    @Override
    public void onButtonInteraction(ButtonInteractionEvent event) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–Ω–æ–ø–æ–∫
    }
}
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Command Options
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```yaml
commands:
  kick:
    description: "Kick a user"
    options:
      - name: "user"
        type: "USER"
        description: "User to kick"
        required: true
      - name: "reason"
        type: "STRING"
        description: "Reason for kick"
        required: false
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Placeholders
–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:
```yaml
- send_message:
    content: "Welcome {user.mention}! You are member #{guild.memberCount}"
```

### 5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –£—Å–ª–æ–≤–∏–π
–£—Å–ª–æ–≤–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π:
```yaml
- add_role:
    role_id: "123"
    condition:
      permission: "ADMINISTRATOR"
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ö–æ–º–ø–∏–ª—è—Ü–∏–∏
```bash
./gradlew build
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –ö–æ–º–∞–Ω–¥—ã
1. –°–æ–∑–¥–∞–π—Ç–µ `commands.yml` –≤ –ø–∞–ø–∫–µ –±–æ—Ç–∞
2. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ `example-commands.yml`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ Discord

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —á–µ—Ä–µ–∑ JDA queue
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è Guild/Channel/Role lookup
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ API –∑–∞–ø—Ä–æ—Å–æ–≤
- Graceful error handling

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç injection –∞—Ç–∞–∫
- Rate limiting —á–µ—Ä–µ–∑ Discord API

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- JDA 5.x
- Java 17+
- Paper/Spigot 1.20+
- Gradle 8.x

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–ª–µ–¥—É–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞.

## –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π:
1. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π `DiscordAction`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ActionHelper` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
3. –î–æ–±–∞–≤—å—Ç–µ –ø–∞—Ä—Å–∏–Ω–≥ –≤ `DiscordCommandLoader.parseAction()`
4. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `ACTIONS_REFERENCE.md`
5. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–º–µ—Ä –≤ `example-commands.yml`
